# プロジェクト文書化ガイド（汎用）

このプロジェクトでは、AI支援による効率的な文書化プロセスを採用し、中~大規模開発における品質と透明性を確保します。

## 📋 文書化方針

### 基本原則

- **AIファースト**: 文書の初稿はAIが生成、人間が査読・承認
- **段階的詳細化**: プロジェクトの進行に合わせて文書を段階的に充実
- **生きた文書**: 実装と並行して文書を更新・改善
- **責任ある文書化**: AIが生成した内容でも人間が最終責任を持つ

## 📚 文書タイプと役割

### 1. PRD (Product Requirements Document)

**役割**: プロダクトの「何を」「なぜ」を定義  
**作成者**: プロダクトマネージャー（AI支援）  
**レビュアー**: ステークホルダー、開発チーム

### 2. Design Doc (技術設計書)

**役割**: システムの「どのように」を設計  
**作成者**: テックリード、アーキテクト（AI支援）  
**レビュアー**: 開発チーム、関連チーム

### 3. ADR (Architecture Decision Record)

**役割**: 重要な決定の「理由」を記録  
**作成者**: 決定関与者（AI支援）  
**レビュアー**: アーキテクチャチーム

---

## ⏰ 文書化タイミング

### フェーズ1: プロジェクト企画期

#### PRD作成

```
タイミング: プロジェクト開始時
AI活用: ユーザーストーリー生成、競合分析、要件整理
人間の役割: ビジネス判断、優先度決定、ステークホルダー調整
```

**成果物:**

- [ ] PRD初版（AI生成）
- [ ] ステークホルダーレビュー
- [ ] 要件確定・承認

**品質基準:**

- ビジネス価値が明確
- ユーザーストーリーが具体的
- 成功指標（KPI）が測定可能
- スコープが明確に定義されている

### フェーズ2: 技術方針決定期

#### 初期技術選択ADR作成

```
タイミング: PRD承認後、設計開始前
AI活用: 技術選択肢比較、代替案分析、影響分析
人間の役割: 技術判断、リスク評価、最終決定
```

**成果物:**

- [ ] プログラミング言語選択ADR
- [ ] フレームワーク選択ADR
- [ ] データベース選択ADR
- [ ] インフラ/クラウド選択ADR
- [ ] アーキテクチャパターンADR

**品質基準:**

- 技術選択の理由が明確
- 代替案との比較が適切
- 制約条件が考慮されている
- チーム内での合意が形成されている

### フェーズ3: 技術設計期

#### L1 Design Doc作成（システムアーキテクチャ）

```
タイミング: 初期技術選択ADR完成後
AI活用: システム全体アーキテクチャ図生成、コンポーネント間連携設計
人間の役割: 全体方針決定、非機能要件評価、技術選択の妥当性確認
```

**成果物:**

- [ ] L1 Design Doc（システム全体設計）
- [ ] システムアーキテクチャレビュー
- [ ] 全体設計確定
- [ ] L2設計方針策定

**品質基準:**

- システム全体が俯瞰できる
- 選択された技術に最適化されている
- 非機能要件が考慮されている
- L2設計への指針が明確

### フェーズ4: 詳細設計・実装期

#### L2 Design Doc作成（サービス設計）

```
タイミング: L1設計確定後、実装開始前
AI活用: サービス間API設計、データフロー設計、サービス詳細仕様
人間の役割: サービス境界の最終判断、実装方針決定
```

**成果物:**

- [ ] L2 Design Doc（主要サービス設計）
- [ ] API仕様確定
- [ ] サービス間連携設計
- [ ] 実装計画策定

#### L3 Design Doc作成（重要コンポーネント設計）

```
タイミング: 実装中、複雑なコンポーネント実装前
AI活用: アルゴリズム設計、データ構造設計、パフォーマンス分析
人間の役割: 技術的詳細判断、実装戦略決定
```

**成果物:**

- [ ] L3 Design Doc（クリティカルコンポーネント）
- [ ] アルゴリズム設計確定
- [ ] パフォーマンス要件設計

#### 実装中ADR追加

```
タイミング: 重要な実装判断時
AI活用: 技術的な詳細記録、コード例生成
人間の役割: 判断の妥当性、将来への影響評価
```

**継続的成果物:**

- [ ] 各レベルDesign Doc更新（設計変更時）
- [ ] 設計決定ADR（技術レビュー後）
- [ ] 実装決定ADR（随時）
- [ ] パフォーマンス最適化ADR
- [ ] セキュリティ対応ADR

## 📂 文書管理

### ディレクトリ構造

```
docs/
├── README.md                 # このファイル
├── prd.md                    # プロダクト要件定義書
├── design/
│   ├── l1-system/
│   │   └── architecture.md    # システム全体設計
│   ├── l2-services/
│   │   ├── api-service.md    # APIサービス設計（必要なら）
│   │   └── auth-service.md    # 認証サービス設計（必要なら）
│   └── l3-components/
│       └── validator.md       # バリデーターコンポーネント（必要なら）
├── adr/
│   ├── ADR-001-framework-choice.md
│   ├── ADR-002-database-selection.md
│   └── ADR-003-authentication-strategy.md
└── templates/
    ├── prd-template.md
    ├── design-doc-l1-system.md
    ├── design-doc-l2-service.md
    ├── design-doc-l3-component.md
    └── adr-template.md
```

---

## 🎯 作成基準

### いつL2/L3を作るか

**L2を作る場合:**

- 複数人が同時に開発するサービス
- 外部APIを提供する部分
- 複雑なビジネスロジックを含む部分

**L3を作る場合:**

- アルゴリズムが複雑
- パフォーマンスがクリティカル
- 再利用される重要コンポーネント

### 作らなくて良い場合

- シンプルなCRUD操作
- 標準的な実装パターン
- 十分にコメントされたコード

### バージョン管理方針

- **PRD**: セマンティックバージョニング（最新版のみ保持）
- **Design Doc**: 日付ベース更新（最新版のみ保持）
- **ADR**: 連番管理（削除禁止）
